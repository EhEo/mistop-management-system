# ðŸ” ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì ìš© ë° í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## âœ… í˜„ìž¬ ìƒíƒœ

ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒì´ **30ë¶„ìœ¼ë¡œ ì •í™•ížˆ ì„¤ì •**ë˜ì–´ ìžˆìœ¼ë©°, ëª¨ë“  ì¸ì¦ íŽ˜ì´ì§€ì— ì ìš©ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.

### ì ìš©ëœ íŽ˜ì´ì§€:
- âœ… dashboard.html
- âœ… profile.html
- âœ… admin.html

---

## ðŸ” ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒì´ ìž‘ë™í•˜ì§€ ì•ŠëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ” ì´ìœ 

### 1. **ë¸Œë¼ìš°ì € ìºì‹œ**
ì´ì „ ë²„ì „ì˜ `session-timeout.js`ê°€ ë¸Œë¼ìš°ì €ì— ìºì‹œë˜ì–´ ìžˆì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

**í•´ê²° ë°©ë²•:**
```
1. Chrome/Edge: Ctrl + Shift + Delete â†’ ìºì‹œëœ ì´ë¯¸ì§€ ë° íŒŒì¼ ì‚­ì œ
2. ë˜ëŠ” Ctrl + F5 (ê°•ì œ ìƒˆë¡œê³ ì¹¨)
3. ë˜ëŠ” ì‹œí¬ë¦¿/í”„ë¼ì´ë¹— ëª¨ë“œë¡œ ì ‘ì†
```

### 2. **í™œë™ ê°ì§€**
ë‹¤ìŒ í™œë™ì´ ê°ì§€ë˜ë©´ íƒ€ì´ë¨¸ê°€ ìžë™ìœ¼ë¡œ ë¦¬ì…‹ë©ë‹ˆë‹¤:
- ë§ˆìš°ìŠ¤ í´ë¦­
- í‚¤ë³´ë“œ ìž…ë ¥
- ìŠ¤í¬ë¡¤
- í„°ì¹˜ (ëª¨ë°”ì¼)

â†’ 30ë¶„ ë™ì•ˆ **ì™„ì „ížˆ** í™œë™í•˜ì§€ ì•Šì•„ì•¼ ë¡œê·¸ì•„ì›ƒë©ë‹ˆë‹¤.

### 3. **ê°œë°œìž ë„êµ¬ë¡œ í™•ì¸ ë¶ˆê°€**
ê°œë°œìž ë„êµ¬(F12)ë¥¼ ì—´ì–´ë‘ë©´ í‚¤ë³´ë“œ/ë§ˆìš°ìŠ¤ í™œë™ìœ¼ë¡œ ì¸ì‹ë˜ì–´ íƒ€ì´ë¨¸ê°€ ê³„ì† ë¦¬ì…‹ë©ë‹ˆë‹¤.

---

## ðŸ§ª ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ í…ŒìŠ¤íŠ¸ ë°©ë²•

### **ë°©ë²• 1: í…ŒìŠ¤íŠ¸ íŽ˜ì´ì§€ ì‚¬ìš© (ê¶Œìž¥)**

1. **í…ŒìŠ¤íŠ¸ íŽ˜ì´ì§€ ì ‘ì†:**
   ```
   https://www.mistop.org/auth/test-session-timeout.html
   ```

2. **ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ (2ë¶„):**
   - "âš¡ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ (2ë¶„)" ë²„íŠ¼ í´ë¦­
   - 2ë¶„ ë™ì•ˆ ë§ˆìš°ìŠ¤/í‚¤ë³´ë“œë¥¼ ì „í˜€ ì›€ì§ì´ì§€ ì•ŠìŒ
   - ìžë™ ë¡œê·¸ì•„ì›ƒ í™•ì¸

3. **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§:**
   - ë¹„í™œì„± ì‹œê°„: ì‹¤ì‹œê°„ìœ¼ë¡œ ê²½ê³¼ ì‹œê°„ í‘œì‹œ
   - ë¡œê·¸: ëª¨ë“  ì´ë²¤íŠ¸ê°€ ê¸°ë¡ë¨
   - í† í° ìƒíƒœ: í˜„ìž¬ ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ

### **ë°©ë²• 2: ì‹¤ì œ íŽ˜ì´ì§€ì—ì„œ í…ŒìŠ¤íŠ¸**

1. **ë¡œê·¸ì¸:**
   ```
   https://www.mistop.org/auth/login.html
   ```

2. **ê°œë°œìž ì½˜ì†” ì—´ê¸°:**
   - F12 í‚¤ ëˆ„ë¦„
   - Console íƒ­ ì„ íƒ

3. **ë””ë²„ê·¸ ëª¨ë“œ í™œì„±í™”:**
   ```javascript
   // ì½˜ì†”ì— ìž…ë ¥
   DEBUG_MODE = true;
   ```

4. **íƒ€ìž„ì•„ì›ƒ ë‹¨ì¶• (í…ŒìŠ¤íŠ¸ìš©):**
   ```javascript
   // ì½˜ì†”ì— ìž…ë ¥ - 2ë¶„ìœ¼ë¡œ ë³€ê²½
   SESSION_TIMEOUT = 2 * 60 * 1000;
   resetSessionTimer();
   ```

5. **2ë¶„ ë™ì•ˆ ëŒ€ê¸°:**
   - ë§ˆìš°ìŠ¤/í‚¤ë³´ë“œ í™œë™ ê¸ˆì§€
   - ì½˜ì†”ì—ì„œ ë¡œê·¸ í™•ì¸

6. **ìžë™ ë¡œê·¸ì•„ì›ƒ í™•ì¸:**
   - ì•Œë¦¼ì°½ì´ ëœ¨ë©´ ì„±ê³µ
   - ë¡œê·¸ì¸ íŽ˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

---

## ðŸ“Š ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ë™ìž‘ ì›ë¦¬

```
[ë¡œê·¸ì¸]
   â†“
[í† í° ì €ìž¥]
   â†“
[íƒ€ì´ë¨¸ ì‹œìž‘: 30ë¶„]
   â†“
[ì‚¬ìš©ìž í™œë™ ê°ì§€] â”€â”€â†’ [íƒ€ì´ë¨¸ ë¦¬ì…‹]
   â†“ (í™œë™ ì—†ìŒ)
[29ë¶„ ê²½ê³¼]
   â†“
[ê²½ê³  ì•Œë¦¼ í‘œì‹œ]
   â†“
[30ë¶„ ê²½ê³¼]
   â†“
[ìžë™ ë¡œê·¸ì•„ì›ƒ]
   â†“
[í† í° ì‚­ì œ]
   â†“
[ë¡œê·¸ì¸ íŽ˜ì´ì§€ë¡œ ì´ë™]
```

---

## ðŸ”§ ë¬¸ì œ í•´ê²°

### **ì¦ìƒ: 30ë¶„ í›„ì—ë„ ë¡œê·¸ì•„ì›ƒë˜ì§€ ì•ŠìŒ**

**ì›ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸:**
1. â˜ ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œí–ˆë‚˜ìš”?
2. â˜ ë§ˆìš°ìŠ¤ë¥¼ ì›€ì§ì´ì§€ ì•Šì•˜ë‚˜ìš”?
3. â˜ ë‹¤ë¥¸ íƒ­ì—ì„œ ê°™ì€ ì‚¬ì´íŠ¸ë¥¼ ì—´ì–´ë‘ì§€ ì•Šì•˜ë‚˜ìš”?
4. â˜ ìžë™ ìƒˆë¡œê³ ì¹¨ í™•ìž¥ í”„ë¡œê·¸ëž¨ì´ ì—†ë‚˜ìš”?

**í•´ê²° ë°©ë²•:**
```bash
# 1. ìºì‹œ ê°•ì œ ì‚­ì œ
Ctrl + Shift + Delete â†’ ìºì‹œ ì‚­ì œ

# 2. ì‹œí¬ë¦¿ ëª¨ë“œë¡œ í…ŒìŠ¤íŠ¸
Ctrl + Shift + N (Chrome)
Ctrl + Shift + P (Firefox)

# 3. í…ŒìŠ¤íŠ¸ íŽ˜ì´ì§€ ì‚¬ìš©
https://www.mistop.org/auth/test-session-timeout.html
```

---

## ðŸŽ¯ ê²€ì¦ ë°©ë²•

### **1. íŒŒì¼ í™•ì¸**
```bash
# ì„œë²„ì—ì„œ í™•ì¸
head -3 /var/www/auth/session-timeout.js

# ì¶œë ¥ í™•ì¸:
# // ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • (30ë¶„ = 1800000ms)
# const SESSION_TIMEOUT = 30 * 60 * 1000;
```

### **2. ë¸Œë¼ìš°ì € í™•ì¸**
```javascript
// F12 â†’ Consoleì— ìž…ë ¥
console.log(SESSION_TIMEOUT / 60000 + 'ë¶„');

// ì¶œë ¥: 30ë¶„
```

### **3. ì‹¤ì œ ë¡œê·¸ í™•ì¸**
```bash
# ì„œë²„ì—ì„œ MongoDB í™œë™ ë¡œê·¸ í™•ì¸
mongosh
use mistop
db.activity_logs.find({action: "LOGIN"}).sort({createdAt: -1}).limit(5).pretty()
```

---

## ðŸ“ ì¶”ê°€ ê°œì„ ì‚¬í•­

### **1. íƒ€ìž„ì•„ì›ƒ ì‹œê°„ ë³€ê²½**
```javascript
// frontend/session-timeout.js ìˆ˜ì •
const SESSION_TIMEOUT = 15 * 60 * 1000;  // 15ë¶„ìœ¼ë¡œ ë³€ê²½
```

### **2. ê²½ê³  ì‹œê°„ ì¡°ì •**
```javascript
// í˜„ìž¬: 29ë¶„ í›„ ê²½ê³ 
// ë³€ê²½: 27ë¶„ í›„ ê²½ê³  (3ë¶„ ì „)
if (elapsed > 27 * 60 * 1000 && elapsed < SESSION_TIMEOUT) {
```

### **3. ì„œë²„ ì‚¬ì´ë“œ ì„¸ì…˜ ì¶”ê°€ (í–¥í›„)**
- JWT í† í° ë§Œë£Œ ì‹œê°„ì„ 30ë¶„ìœ¼ë¡œ ë§žì¶¤
- í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ë™ì‹œì— ì„¸ì…˜ ê´€ë¦¬
- ë” ê°•ë ¥í•œ ë³´ì•ˆ

---

## âœ… ìµœì¢… í™•ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] session-timeout.js íŒŒì¼ì´ 30ë¶„ìœ¼ë¡œ ì„¤ì •ë¨
- [x] dashboard.htmlì— ìŠ¤í¬ë¦½íŠ¸ í¬í•¨ë¨
- [x] profile.htmlì— ìŠ¤í¬ë¦½íŠ¸ í¬í•¨ë¨
- [x] admin.htmlì— ìŠ¤í¬ë¦½íŠ¸ í¬í•¨ë¨
- [x] ìš´ì˜ ì„œë²„ì— ë°°í¬ë¨ (/var/www/auth/)
- [x] í…ŒìŠ¤íŠ¸ íŽ˜ì´ì§€ ìƒì„±ë¨
- [x] ë””ë²„ê·¸ ëª¨ë“œ ì¶”ê°€ë¨

---

## ðŸš€ í…ŒìŠ¤íŠ¸ ì‹œìž‘í•˜ê¸°

**ì§€ê¸ˆ ë°”ë¡œ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´:**

1. ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†:
   ```
   https://www.mistop.org/auth/test-session-timeout.html
   ```

2. "âœ… í† í° ì„¤ì •" ë²„íŠ¼ í´ë¦­

3. "âš¡ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ (2ë¶„)" ë²„íŠ¼ í´ë¦­

4. 2ë¶„ ë™ì•ˆ ëŒ€ê¸° (ë§ˆìš°ìŠ¤/í‚¤ë³´ë“œ ê¸ˆì§€)

5. ìžë™ ë¡œê·¸ì•„ì›ƒ í™•ì¸!

---

## ðŸ“ž ë¬¸ì œê°€ ê³„ì†ë˜ë©´

1. **ë¸Œë¼ìš°ì € ìºì‹œ ì™„ì „ ì‚­ì œ**
2. **ì‹œí¬ë¦¿ ëª¨ë“œë¡œ í…ŒìŠ¤íŠ¸**
3. **í…ŒìŠ¤íŠ¸ íŽ˜ì´ì§€ ì‚¬ìš©**
4. **F12 ì½˜ì†”ì—ì„œ ë¡œê·¸ í™•ì¸**

ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒì€ **ì •ìƒì ìœ¼ë¡œ ìž‘ë™ ì¤‘**ìž…ë‹ˆë‹¤! ðŸŽ‰
